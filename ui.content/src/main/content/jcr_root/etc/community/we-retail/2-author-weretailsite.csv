# Title: Install Community Site and Templates,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
"# Description: This option first creates a Community Site template, then creates the We.Retail Community Site ouf the template, then publishes the We.Retail Community Site",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
# Configuring the AEM Communities Publish Tunnel,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
SlingPost,/system/console/configMgr/com.adobe.cq.social.user.impl.transport.HttpToPublisher,apply,TRUE,action,ajaxConfigManager,$location,,enable,TRUE,enable,FALSE,agent.configuration,/etc/replication/agents.author/publish,disabled.cipher.suites,,enabled.cipher.suites,,propertylist,"enable,agent.configuration,disabled.cipher.suites,enabled.cipher.suites",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
# Getting rid of the redirect static pages,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
SlingDelete,/content/we-retail/community,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
# Creating the Commmunity site template for We.Retail,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
SiteTemplate,/content.social.json,templateName,WeRetail Template,description,We.Retail demo community site template,enabled,on,functions,"{""functions"":[{""title"":""Activities"",""url"":""activities"",""configuration"":[{""id"":""allowMyActivities"",""value"":""true""},{""id"":""allowAllActivities"",""value"":""true""},{""id"":""allowNewsFeed"",""value"":""true""}],""function"":""/etc/community/templates/functions/reference/activitystream""},{""title"":""Trending"",""url"":""trending"",""configuration"":[],""function"":""/etc/community/templates/functions/reference/page""},{""title"":""Forum"",""url"":""forum"",""configuration"":[{""id"":""allowNestedReplies"",""value"":""true""},{""id"":""allowAttachments"",""value"":""true""}],""function"":""/etc/community/templates/functions/reference/forum""},{""title"":""Files"",""url"":""files"",""configuration"":[],""function"":""/etc/community/templates/functions/reference/filelibrary""},{""title"":""Catalog"",""url"":""catalog"",""configuration"":[{""id"":""tagNamespaces"",""value"":[""/etc/tags/geometrixx-outdoors""]}],""function"":""/etc/community/templates/functions/reference/catalog""},{""title"":""Assignments"",""url"":""assignments"",""origUrl"":""assignments"",""configuration"":[],""function"":""/etc/community/templates/functions/reference/assignments""},{""title"":""Blog"",""url"":""blog"",""configuration"":[{""id"":""allowPrivilegedMembers"",""value"":true},{""id"":""allowAttachments"",""value"":true},{""id"":""allowNestedReplies"",""value"":true},{""id"":""cq:privilegedMembers"",""value"":[""/social/groups/aem-privileged-members""]}],""function"":""/etc/community/templates/functions/reference/blog""},{""title"":""Questions"",""url"":""questions"",""configuration"":[{""id"":""allowNestedReplies"",""value"":""true""},{""id"":""allowAttachments"",""value"":""true""}],""function"":""/etc/community/templates/functions/reference/qna""},{""title"":""Calendar"",""url"":""calendar"",""configuration"":[{""id"":""allowPrivilegedMembers"",""value"":true},{""id"":""allowAttachments"",""value"":true},{""id"":""allowNestedReplies"",""value"":true},{""id"":""cq:privilegedMembers"",""value"":[""/social/groups/aem-privileged-members""]}],""function"":""/etc/community/templates/functions/reference/calendar""},{""title"":""Groups"",""url"":""groups"",""configuration"":[{""id"":""groupTemplates"",""value"":[""/etc/community/templates/groups/reference/reference-group-workspace-site"",""/etc/community/templates/groups/reference/reference-group-forum-site""]}],""function"":""/etc/community/templates/functions/reference/groups""},{""title"":""About"",""url"":""about"",""configuration"":[],""function"":""/etc/community/templates/functions/reference/page""}]} ",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
"# Creating the We.Retail Community site																																																																	",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Site,/content.social.json,name,Communities,jcr:description,We.Retail Community site,dns,community.weretail.com,urlName,community,siteRoot,/content/we-retail,blueprint,/etc/community/templates/sites/custom/weretail_template,pagecss,bootstrap.css,allowUserRegistration,TRUE,allowAnonymousAccess,TRUE,allowPrivateMessaging,TRUE,allowFacebook,TRUE,fbconnectoauthid,/etc/cloudservices/facebookconnect/geometrixx-outdoorsfacebookapp/jcr:content ,allowTwitter,TRUE,twitterconnectoauthid,/etc/cloudservices/twitterconnect/geometrixx-outdoors-twitter-app/jcr:content ,moderators,/social/authors/aaron.mcdonald@mailinator.com,moderateContent,FALSE,tagNameSpaces,/etc/tags/we-retail,groupEnablementManagers,/social/authors/jason.werner@dodgit.com ,groupAdmin,/social/authors/aaron.mcdonald@mailinator.com,createGroupPermission,COMMUNITY_GROUP_ADMINISTRATORS ,baseLanguage,en,allowMachineTranslation,TRUE,availableLanguages,en,availableLanguages,fr,availableLanguages,de,availableLanguages,es,persistTranslation,TRUE,translatePageOrSection,TRANSLATE_SELECTION,pagethumbnail,cardWeRetail.jpg,enableAnalytics,TRUE,analyticsCloudConfigPath,/etc/cloudservices/sitecatalyst/demomachine/demomachine
# Updating the primary page template for we.Retail,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
SlingPost,/content/we-retail/community/en/configuration,page-template,weretail,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
# Updating a few components with new settings,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Forum,/content/we-retail/community/en/forum/jcr:content/content/primary/forum.social.json,rteEnabled,TRUE,allowVoting,TRUE,allowRepliesToComments,TRUE,allowCloseComments,TRUE,allowDeleteComments,TRUE,allowDenyComments,TRUE,allowFlagComments,TRUE,flagModerateThreshold,1,flagViewThreshold,3,allowFileUploads,TRUE,allowMoves,TRUE,allowBadges,TRUE,showCrumbs,TRUE,filterBadgesByComponent,TRUE,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Forum,/content/we-retail/community/en/groups/hiking/jcr:content/content/primary/forum.social.json,rteEnabled,TRUE,allowVoting,TRUE,allowRepliesToComments,TRUE,allowCloseComments,TRUE,allowDeleteComments,TRUE,allowDenyComments,TRUE,allowFlagComments,TRUE,flagModerateThreshold,1,flagViewThreshold,3,allowFileUploads,TRUE,allowMoves,TRUE,allowBadges,TRUE,showCrumbs,TRUE,filterBadgesByComponent,TRUE,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Forum,/content/we-retail/community/en/groups/hiking/jcr:content/content/primary/forum.social.json,rteEnabled,TRUE,allowVoting,TRUE,allowRepliesToComments,TRUE,allowCloseComments,TRUE,allowDeleteComments,TRUE,allowDenyComments,TRUE,allowFlagComments,TRUE,flagModerateThreshold,1,flagViewThreshold,3,allowFileUploads,TRUE,allowMoves,TRUE,allowBadges,TRUE,showCrumbs,TRUE,filterBadgesByComponent,TRUE,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Forum,/content/we-retail/community/en/groups/surfing/jcr:content/content/primary/forum.social.json,rteEnabled,TRUE,allowVoting,TRUE,allowRepliesToComments,TRUE,allowCloseComments,TRUE,allowDeleteComments,TRUE,allowDenyComments,TRUE,allowFlagComments,TRUE,flagModerateThreshold,1,flagViewThreshold,3,allowFileUploads,TRUE,allowMoves,TRUE,allowBadges,TRUE,showCrumbs,TRUE,filterBadgesByComponent,TRUE,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
"# The following lines are adding ""activity components"" to the trending page",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
SlingPost,/content/we-retail/community/en/trending/jcr:content/content/primary/trending1,activityType,views,displayCount,5,displayTitle,Top Visitors,sling:resourceType,social/reporting/analytics/components/hbs/communityactivitylist,timePeriod,total,type,members,contextPath,/content/we-retail/community/en,isAggregate,TRUE,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
SlingPost,/content/we-retail/community/en/trending/jcr:content/content/primary/trending1/cq:responsive/default,width,6,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
SlingPost,/content/we-retail/community/en/trending/jcr:content/content/primary/trending2,activityType,posts,displayCount,5,displayTitle,Top Contributors,sling:resourceType,social/reporting/analytics/components/hbs/communityactivitylist,timePeriod,total,type,members,contextPath,/content/we-retail/community/en,isAggregate,TRUE,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
SlingPost,/content/we-retail/community/en/trending/jcr:content/content/primary/trending2/cq:responsive/default,width,6,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
SlingPost,/content/we-retail/community/en/trending/jcr:content/content/primary/trending3,activityType,views,displayCount,5,displayTitle,Top Content,sling:resourceType,social/reporting/analytics/components/hbs/communityactivitylist,timePeriod,total,type,content,contextPath,/content/we-retail/community/en,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
SlingPost,/content/we-retail/community/en/trending/jcr:content/content/primary/trending3/cq:responsive/default,width,6,behavior,newline,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
SlingPost,/content/we-retail/community/en/trending/jcr:content/content/primary/trending4,activityType,posts,displayCount,5,displayTitle,Trending Content,sling:resourceType,social/reporting/analytics/components/hbs/communityactivitylist,timePeriod,total,type,content,contextPath,/content/we-retail/community/en,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
SlingPost,/content/we-retail/community/en/trending/jcr:content/content/primary/trending4/cq:responsive/default,width,6,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
# Setting the privileged member groups for the Blog and Calendar (this will also republish the site),,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
SiteUpdate,community,en,functions,"{""functions"":[{""title"":""Activities"",""url"":""activities"",""origUrl"":""activities"",""configuration"":[{""id"":""allowMyActivities"",""value"":""true""},{""id"":""allowAllActivities"",""value"":""true""},{""id"":""allowNewsFeed"",""value"":""true""}],""function"":""/etc/community/templates/functions/reference/activitystream""},{""title"":""Trending"",""url"":""trending"",""origUrl"":""trending"",""configuration"":[],""function"":""/etc/community/templates/functions/reference/page""},{""title"":""Forum"",""url"":""forum"",""origUrl"":""forum"",""configuration"":[{""id"":""allowNestedReplies"",""value"":""true""},{""id"":""allowAttachments"",""value"":""true""}],""function"":""/etc/community/templates/functions/reference/forum""},{""title"":""Files"",""url"":""files"",""origUrl"":""files"",""configuration"":[],""function"":""/etc/community/templates/functions/reference/filelibrary""},{""title"":""Catalog"",""url"":""catalog"",""origUrl"":""catalog"",""configuration"":[{""id"":""tagNamespaces"",""value"":[""/etc/tags/we-retail""]}],""function"":""/etc/community/templates/functions/reference/catalog""},{""title"":""Assignments"",""url"":""assignments"",""origUrl"":""assignments"",""configuration"":[],""function"":""/etc/community/templates/functions/reference/assignments""},{""title"":""Blog"",""url"":""blog"",""origUrl"":""blog"",""configuration"":[{""id"":""allowPrivilegedMembers"",""value"":true},{""id"":""allowAttachments"",""value"":true},{""id"":""allowNestedReplies"",""value"":true},{""id"":""cq:privilegedMembers"",""value"":[""/social/groups/weretail-privileged-members""]}],""function"":""/etc/community/templates/functions/reference/blog""},{""title"":""Questions"",""url"":""questions"",""origUrl"":""questions"",""configuration"":[{""id"":""allowNestedReplies"",""value"":""true""},{""id"":""allowAttachments"",""value"":""true""}],""function"":""/etc/community/templates/functions/reference/qna""},{""title"":""Calendar"",""url"":""calendar"",""origUrl"":""calendar"",""configuration"":[{""id"":""allowPrivilegedMembers"",""value"":true},{""id"":""allowAttachments"",""value"":true},{""id"":""allowNestedReplies"",""value"":true},{""id"":""cq:privilegedMembers"",""value"":[""/social/groups/weretail-privileged-members""]}],""function"":""/etc/community/templates/functions/reference/calendar""},{""title"":""Groups"",""url"":""groups"",""origUrl"":""groups"",""configuration"":[{""id"":""groupTemplates"",""value"":[""/etc/community/templates/groups/reference/reference-group-workspace-site"",""/etc/community/templates/groups/reference/reference-group-forum-site""]}],""function"":""/etc/community/templates/functions/reference/groups""},{""title"":""About"",""url"":""about"",""origUrl"":""about"",""configuration"":[],""function"":""/etc/community/templates/functions/reference/page""}]} ",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,